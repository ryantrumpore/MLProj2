function y = nsp3_filter(x)
%NSP3_FILTER Filters input x and returns output y.

% MATLAB Code
% Generated by MATLAB(R) 8.4 and the DSP System Toolbox 8.7.
% Generated on: 27-Apr-2015 16:20:13

%#codegen

% To generate C/C++ code from this function use the codegen command. Type
% 'help codegen' for more information.

persistent Hd;

if isempty(Hd)
    
    % The following code was used to design the filter coefficients:
    % % Equiripple Lowpass filter designed using the FIRPM function.
    %
    % % All frequency values are in Hz.
    % Fs = 8000;  % Sampling Frequency
    %
    % Fpass = 700;             % Passband Frequency
    % Fstop = 725;             % Stopband Frequency
    % Dpass = 0.057501127785;  % Passband Ripple
    % Dstop = 0.0001;          % Stopband Attenuation
    % dens  = 20;              % Density Factor
    %
    % % Calculate the order from the parameters using FIRPMORD.
    % [N, Fo, Ao, W] = firpmord([Fpass, Fstop]/(Fs/2), [1 0], [Dpass, Dstop]);
    %
    % % Calculate the coefficients using the FIRPM function.
    % b  = firpm(N, Fo, Ao, W, {dens});
    
    Hd = dsp.FIRFilter( ...
        'Numerator', [-4.73023217780688e-05 4.40582267261192e-05 ...
        0.000167221600715399 0.000400330332597545 0.000764949199507553 ...
        0.00126728764264386 0.00188912995469401 0.00258302774527131 ...
        0.00327341003889706 0.00386441498550808 0.00425419475223295 ...
        0.00435355080129453 0.00410558019656258 0.0035018689169032 ...
        0.00259117598653138 0.00147744004453913 0.000306302160936397 ...
        -0.000758450541149401 -0.00156432861354308 -0.00199975172781467 ...
        -0.00201715754930876 -0.00164425265740917 -0.000980066870799755 ...
        -0.000176039366058333 0.000594646042367572 0.00117292705161675 ...
        0.00144717287704672 0.00137612452249944 0.000996384621159785 ...
        0.000412282639707768 -0.000229597543567706 -0.000775554632045626 ...
        -0.00110078957622621 -0.00113820294741281 -0.000892863280278775 ...
        -0.000438754245045259 0.000101654537308376 0.000588723645042143 ...
        0.000901453908011652 0.000967316416500318 0.000779309647173424 ...
        0.000396176700941749 -7.47560684167424e-05 -0.00050652438756884 ...
        -0.000786438431460927 -0.000845258233972137 -0.000674579053513228 ...
        -0.000327552135373992 9.66726714318469e-05 0.000480714563355896 ...
        0.000721045449375573 0.000755859769735855 0.000581028881734806 ...
        0.000250141803371404 -0.000141351076275826 -0.000483219231494093 ...
        -0.000681281428062374 -0.000683267114016767 -0.000492729743084758 ...
        -0.000167165778060277 0.000198906128454274 0.000501111863825266 ...
        0.000654782653386906 0.000618662770861431 0.000406070254628511 ...
        8.04705513354694e-05 -0.000263220820745341 -0.000526053280623703 ...
        -0.000633419028765818 -0.00055625235453814 -0.000318964707193494 ...
        8.06770509874547e-06 0.000329112519633423 0.000550999457678269 ...
        0.000610076467788507 0.000490452530975756 0.000228431765131626 ...
        -9.84338535811445e-05 -0.000394044470953175 -0.000571949680282703 ...
        -0.000580547003161533 -0.000418097846509275 -0.000133093735717944 ...
        0.000190088390524832 0.0004560311496007 0.000586365957053533 ...
        0.000542831423887303 0.000338542061957766 3.41129938964786e-05 ...
        -0.000280208258022231 -0.000511205305157667 -0.000590273589395704 ...
        -0.000493786677219764 -0.000250186243286539 6.83089451371948e-05 ...
        0.00036702681740624 0.000556903098008512 0.000580989673142924 ...
        0.000431511723177934 0.000152417588577136 -0.00017347953666142 ...
        -0.000448996220053989 -0.000591488219791516 -0.000557588687630184 ...
        -0.000356417442420753 -4.71688664618018e-05 0.000278236674556016 ...
        0.000522408973156708 0.00061159454484033 0.000517927014136255 ...
        0.000268102987880995 -6.41361039452022e-05 -0.000379763425221251 ...
        -0.000583891702058072 -0.000614281064561 -0.000460291991909871 ...
        -0.000166536799409538 0.00017997816418259 0.0004755931059843 ...
        0.000630933612176222 0.000597914964660001 0.000384590651874187 ...
        5.33188460754279e-05 -0.000297432246309693 -0.000562293942460435 ...
        -0.000660615997121909 -0.000560992213998792 -0.000291259763808115 ...
        6.92253062350932e-05 0.000412879628363263 0.000635959555390113 ...
        0.000669842207872496 0.000502107926541327 0.000180939198780896 ...
        -0.000198655452567772 -0.000522905872109817 -0.000693336493423542 ...
        -0.000656633447187312 -0.000421279322218499 -5.57836554576593e-05 ...
        0.000331220099301628 0.000623211662987332 0.00073082407432119 ...
        0.000619163292119892 0.000319043210896874 -8.14417714620916e-05 ...
        -0.000462717085728597 -0.000709405762029303 -0.000745192078055858 ...
        -0.000556387905328049 -0.000196929516146745 0.000226989671932528 ...
        0.000588229907318677 0.000776824149889699 0.000733398240660998 ...
        0.000467820472565633 5.71884705833282e-05 -0.000376497970825518 ...
        -0.000702549726555519 -0.000820934338446264 -0.000692925724569115 ...
        -0.000353686463330074 9.72931598536592e-05 0.000525324399067197 ...
        0.000800705419094414 0.000837981222697519 0.000622419229832859 ...
        0.000215494990179955 -0.000262566655849505 -0.000668263720448344 ...
        -0.000877848966325218 -0.000825037343047925 -0.000521893553665672 ...
        -5.63651933430009e-05 0.000433175057135645 0.000799012762212346 ...
        0.000928618266468627 0.000779205567915042 0.000391743856172624 ...
        -0.00012016785925469 -0.000603542596015711 -0.00091167552707501 ...
        -0.000948621217000326 -0.000699000569096931 -0.000233898574841471 ...
        0.0003092879614242 0.000767399124181865 0.00100045271368275 ...
        0.000934378442935709 0.00058445073578823 5.20779421847459e-05 ...
        -0.000504521459755921 -0.000917294669252923 -0.00105904436562525 ...
        -0.000882569714976983 -0.000436211839252919 0.000149247636525716 ...
        0.000698851905348427 0.00104570460023298 0.00108160538275362 ...
        0.000790729456699773 0.000255898312400714 -0.000364907687623291 ...
        -0.000885154942226301 -0.00114575317161612 -0.00106365122472089 ...
        -0.000658202542875406 -4.69558811883429e-05 0.000588333908573264 ...
        0.00105568970869257 0.00121086907825704 0.00100180714565601 ...
        0.000485885799543193 -0.000185647364763293 -0.000811941354742468 ...
        -0.00120254570102999 -0.0012352512947637 -0.00089423080933649 ...
        -0.000276586968525448 0.000435176059822443 0.00102700634625862 ...
        0.00131761063431919 0.00121390236141819 0.000740676271056981 ...
        3.50754959180606e-05 -0.000693065349945808 -0.00122354314284208 ...
        -0.00139232066855238 -0.00114214984616378 -0.0005417307705853 ...
        0.000232975106324613 0.000950216852929767 0.00139171610008231 ...
        0.00141901618352349 0.00101679250851322 0.000299597889496842 ...
        -0.000520615356371823 -0.0011970454447915 -0.00152221851163655 ...
        -0.00139153384155585 -0.000836740635894895 -1.86811120245884e-05 ...
        0.000819214955587272 0.00142326128691516 0.00160622706296517 ...
        0.0013052529789031 0.000603089376966468 -0.000294417390750674 ...
        -0.00111854544852021 -0.00161804604804228 -0.00163562211927382 ...
        -0.00115729634264519 -0.000319221203410908 0.000630902860479574 ...
        0.00140691254890971 0.00177025281345252 0.00160317951174071 ...
        0.000946659200660439 -9.14486183220744e-06 -0.000979800917221052 ...
        -0.00167112911981457 -0.00186822831164311 -0.00150212403200981 ...
        -0.000673394014618351 0.000375168325497154 0.00132953136620352 ...
        0.0018983354731363 0.00190169423923028 0.00132787402959504 ...
        0.00034004121374303 -0.000769893203035651 -0.00166737135737891 ...
        -0.00207586622900677 -0.00186190583715166 -0.00107833894747457 ...
        4.80632915384963e-05 0.00118202187513519 0.00197935767914188 ...
        0.00219126586762622 0.00174171484201281 0.000753973091810171 ...
        -0.000482816506461956 -0.00159805009732064 -0.00225051008038924 ...
        -0.0022325332312609 -0.00153578092441606 -0.00035786444809159 ...
        0.000953387468048406 0.00200241249146713 0.00246500503852285 ...
        0.00218824923406521 0.00124055962472157 -0.000104400663070322 ...
        -0.00144644150096516 -0.0023776578022218 -0.00260614065410853 ...
        -0.00204713953001738 -0.000853329641288479 0.000626354721501074 ...
        0.00194837205641618 0.00270720712320454 0.00265941510665972 ...
        0.00180123379763362 0.000375169079571344 -0.00119806770422983 ...
        -0.00244329365931296 -0.00297399358962719 -0.00261185366723167 ...
        -0.00144585226173042 0.000188448782290319 0.00180500683621756 ...
        0.0029114171637712 0.00315844351596629 0.0024496824223392 ...
        0.00097710492038202 -0.000830148548383812 -0.00243030991196721 ...
        -0.00333087601353809 -0.00323963079642473 -0.00215865995865981 ...
        -0.000391338948885817 0.00154205818253905 0.00305689811588712 ...
        0.00368032177178447 0.00319811282283914 0.00172689694434212 ...
        -0.000312263606390014 -0.00231357173963883 -0.00366567942451204 ...
        -0.00393760693220522 -0.00301508373185061 -0.00114449578218528 ...
        0.0011315719426755 0.00313076608086431 0.00423455088885826 ...
        0.00407848410535627 0.00267099238774741 0.000402361847037238 ...
        -0.0020621398909504 -0.00397617674369416 -0.00473708719000996 ...
        -0.00407418140994464 -0.00214218707971159 0.000511648163721037 ...
        0.00310100038789906 0.00483188684085926 0.00514441205908875 ...
        0.00389174446992193 0.00139974688059362 -0.00161510132680679 ...
        -0.00424967982893958 -0.00568260364639526 -0.00542786840801152 ...
        -0.00349617052241785 -0.000411342237412623 0.00292875031455226 ...
        0.00551078180252385 0.00651033481388225 0.00555152542624152 ...
        0.00284119596565148 -0.000868408148337494 -0.0044846088536019 ...
        -0.00689214214413172 -0.00729255209058118 -0.00546319090402041 ...
        -0.00185350761236062 0.00251838482321412 0.0063472976117788 ...
        0.00842436420099001 0.00801135723781522 0.00509217033975503 ...
        0.000418789896407329 -0.00467344033732621 -0.00863845526889075 ...
        -0.0101783721794731 -0.00865535990942651 -0.004329488440508 ...
        0.00165990712587309 0.00758026714563331 0.0115910463277262 ...
        0.0122963094167047 0.00920407215291081 0.00294854389911542 ...
        -0.00480859832320736 -0.0117932502727312 -0.0157525464603516 ...
        -0.0151382630188925 -0.00964368628735321 -0.000424534435376384 ...
        0.010088461471069 0.0187691432746813 0.0226397207205282 ...
        0.0197667970569609 0.00996612602469807 -0.00489450118219272 ...
        -0.0211128695742013 -0.033879397859953 -0.0383678841999238 ...
        -0.0309398708958589 -0.0101675485768093 0.0225912823770902 ...
        0.0632348116786611 0.105599487326136 0.142651270240068 0.167926224980769 ...
        0.176893612503896 0.167926224980769 0.142651270240068 0.105599487326136 ...
        0.0632348116786611 0.0225912823770902 -0.0101675485768093 ...
        -0.0309398708958589 -0.0383678841999238 -0.033879397859953 ...
        -0.0211128695742013 -0.00489450118219272 0.00996612602469807 ...
        0.0197667970569609 0.0226397207205282 0.0187691432746813 ...
        0.010088461471069 -0.000424534435376384 -0.00964368628735321 ...
        -0.0151382630188925 -0.0157525464603516 -0.0117932502727312 ...
        -0.00480859832320736 0.00294854389911542 0.00920407215291081 ...
        0.0122963094167047 0.0115910463277262 0.00758026714563331 ...
        0.00165990712587309 -0.004329488440508 -0.00865535990942651 ...
        -0.0101783721794731 -0.00863845526889075 -0.00467344033732621 ...
        0.000418789896407329 0.00509217033975503 0.00801135723781522 ...
        0.00842436420099001 0.0063472976117788 0.00251838482321412 ...
        -0.00185350761236062 -0.00546319090402041 -0.00729255209058118 ...
        -0.00689214214413172 -0.0044846088536019 -0.000868408148337494 ...
        0.00284119596565148 0.00555152542624152 0.00651033481388225 ...
        0.00551078180252385 0.00292875031455226 -0.000411342237412623 ...
        -0.00349617052241785 -0.00542786840801152 -0.00568260364639526 ...
        -0.00424967982893958 -0.00161510132680679 0.00139974688059362 ...
        0.00389174446992193 0.00514441205908875 0.00483188684085926 ...
        0.00310100038789906 0.000511648163721037 -0.00214218707971159 ...
        -0.00407418140994464 -0.00473708719000996 -0.00397617674369416 ...
        -0.0020621398909504 0.000402361847037238 0.00267099238774741 ...
        0.00407848410535627 0.00423455088885826 0.00313076608086431 ...
        0.0011315719426755 -0.00114449578218528 -0.00301508373185061 ...
        -0.00393760693220522 -0.00366567942451204 -0.00231357173963883 ...
        -0.000312263606390014 0.00172689694434212 0.00319811282283914 ...
        0.00368032177178447 0.00305689811588712 0.00154205818253905 ...
        -0.000391338948885817 -0.00215865995865981 -0.00323963079642473 ...
        -0.00333087601353809 -0.00243030991196721 -0.000830148548383812 ...
        0.00097710492038202 0.0024496824223392 0.00315844351596629 ...
        0.0029114171637712 0.00180500683621756 0.000188448782290319 ...
        -0.00144585226173042 -0.00261185366723167 -0.00297399358962719 ...
        -0.00244329365931296 -0.00119806770422983 0.000375169079571344 ...
        0.00180123379763362 0.00265941510665972 0.00270720712320454 ...
        0.00194837205641618 0.000626354721501074 -0.000853329641288479 ...
        -0.00204713953001738 -0.00260614065410853 -0.0023776578022218 ...
        -0.00144644150096516 -0.000104400663070322 0.00124055962472157 ...
        0.00218824923406521 0.00246500503852285 0.00200241249146713 ...
        0.000953387468048406 -0.00035786444809159 -0.00153578092441606 ...
        -0.0022325332312609 -0.00225051008038924 -0.00159805009732064 ...
        -0.000482816506461956 0.000753973091810171 0.00174171484201281 ...
        0.00219126586762622 0.00197935767914188 0.00118202187513519 ...
        4.80632915384963e-05 -0.00107833894747457 -0.00186190583715166 ...
        -0.00207586622900677 -0.00166737135737891 -0.000769893203035651 ...
        0.00034004121374303 0.00132787402959504 0.00190169423923028 ...
        0.0018983354731363 0.00132953136620352 0.000375168325497154 ...
        -0.000673394014618351 -0.00150212403200981 -0.00186822831164311 ...
        -0.00167112911981457 -0.000979800917221052 -9.14486183220744e-06 ...
        0.000946659200660439 0.00160317951174071 0.00177025281345252 ...
        0.00140691254890971 0.000630902860479574 -0.000319221203410908 ...
        -0.00115729634264519 -0.00163562211927382 -0.00161804604804228 ...
        -0.00111854544852021 -0.000294417390750674 0.000603089376966468 ...
        0.0013052529789031 0.00160622706296517 0.00142326128691516 ...
        0.000819214955587272 -1.86811120245884e-05 -0.000836740635894895 ...
        -0.00139153384155585 -0.00152221851163655 -0.0011970454447915 ...
        -0.000520615356371823 0.000299597889496842 0.00101679250851322 ...
        0.00141901618352349 0.00139171610008231 0.000950216852929767 ...
        0.000232975106324613 -0.0005417307705853 -0.00114214984616378 ...
        -0.00139232066855238 -0.00122354314284208 -0.000693065349945808 ...
        3.50754959180606e-05 0.000740676271056981 0.00121390236141819 ...
        0.00131761063431919 0.00102700634625862 0.000435176059822443 ...
        -0.000276586968525448 -0.00089423080933649 -0.0012352512947637 ...
        -0.00120254570102999 -0.000811941354742468 -0.000185647364763293 ...
        0.000485885799543193 0.00100180714565601 0.00121086907825704 ...
        0.00105568970869257 0.000588333908573264 -4.69558811883429e-05 ...
        -0.000658202542875406 -0.00106365122472089 -0.00114575317161612 ...
        -0.000885154942226301 -0.000364907687623291 0.000255898312400714 ...
        0.000790729456699773 0.00108160538275362 0.00104570460023298 ...
        0.000698851905348427 0.000149247636525716 -0.000436211839252919 ...
        -0.000882569714976983 -0.00105904436562525 -0.000917294669252923 ...
        -0.000504521459755921 5.20779421847459e-05 0.00058445073578823 ...
        0.000934378442935709 0.00100045271368275 0.000767399124181865 ...
        0.0003092879614242 -0.000233898574841471 -0.000699000569096931 ...
        -0.000948621217000326 -0.00091167552707501 -0.000603542596015711 ...
        -0.00012016785925469 0.000391743856172624 0.000779205567915042 ...
        0.000928618266468627 0.000799012762212346 0.000433175057135645 ...
        -5.63651933430009e-05 -0.000521893553665672 -0.000825037343047925 ...
        -0.000877848966325218 -0.000668263720448344 -0.000262566655849505 ...
        0.000215494990179955 0.000622419229832859 0.000837981222697519 ...
        0.000800705419094414 0.000525324399067197 9.72931598536592e-05 ...
        -0.000353686463330074 -0.000692925724569115 -0.000820934338446264 ...
        -0.000702549726555519 -0.000376497970825518 5.71884705833282e-05 ...
        0.000467820472565633 0.000733398240660998 0.000776824149889699 ...
        0.000588229907318677 0.000226989671932528 -0.000196929516146745 ...
        -0.000556387905328049 -0.000745192078055858 -0.000709405762029303 ...
        -0.000462717085728597 -8.14417714620916e-05 0.000319043210896874 ...
        0.000619163292119892 0.00073082407432119 0.000623211662987332 ...
        0.000331220099301628 -5.57836554576593e-05 -0.000421279322218499 ...
        -0.000656633447187312 -0.000693336493423542 -0.000522905872109817 ...
        -0.000198655452567772 0.000180939198780896 0.000502107926541327 ...
        0.000669842207872496 0.000635959555390113 0.000412879628363263 ...
        6.92253062350932e-05 -0.000291259763808115 -0.000560992213998792 ...
        -0.000660615997121909 -0.000562293942460435 -0.000297432246309693 ...
        5.33188460754279e-05 0.000384590651874187 0.000597914964660001 ...
        0.000630933612176222 0.0004755931059843 0.00017997816418259 ...
        -0.000166536799409538 -0.000460291991909871 -0.000614281064561 ...
        -0.000583891702058072 -0.000379763425221251 -6.41361039452022e-05 ...
        0.000268102987880995 0.000517927014136255 0.00061159454484033 ...
        0.000522408973156708 0.000278236674556016 -4.71688664618018e-05 ...
        -0.000356417442420753 -0.000557588687630184 -0.000591488219791516 ...
        -0.000448996220053989 -0.00017347953666142 0.000152417588577136 ...
        0.000431511723177934 0.000580989673142924 0.000556903098008512 ...
        0.00036702681740624 6.83089451371948e-05 -0.000250186243286539 ...
        -0.000493786677219764 -0.000590273589395704 -0.000511205305157667 ...
        -0.000280208258022231 3.41129938964786e-05 0.000338542061957766 ...
        0.000542831423887303 0.000586365957053533 0.0004560311496007 ...
        0.000190088390524832 -0.000133093735717944 -0.000418097846509275 ...
        -0.000580547003161533 -0.000571949680282703 -0.000394044470953175 ...
        -9.84338535811445e-05 0.000228431765131626 0.000490452530975756 ...
        0.000610076467788507 0.000550999457678269 0.000329112519633423 ...
        8.06770509874547e-06 -0.000318964707193494 -0.00055625235453814 ...
        -0.000633419028765818 -0.000526053280623703 -0.000263220820745341 ...
        8.04705513354694e-05 0.000406070254628511 0.000618662770861431 ...
        0.000654782653386906 0.000501111863825266 0.000198906128454274 ...
        -0.000167165778060277 -0.000492729743084758 -0.000683267114016767 ...
        -0.000681281428062374 -0.000483219231494093 -0.000141351076275826 ...
        0.000250141803371404 0.000581028881734806 0.000755859769735855 ...
        0.000721045449375573 0.000480714563355896 9.66726714318469e-05 ...
        -0.000327552135373992 -0.000674579053513228 -0.000845258233972137 ...
        -0.000786438431460927 -0.00050652438756884 -7.47560684167424e-05 ...
        0.000396176700941749 0.000779309647173424 0.000967316416500318 ...
        0.000901453908011652 0.000588723645042143 0.000101654537308376 ...
        -0.000438754245045259 -0.000892863280278775 -0.00113820294741281 ...
        -0.00110078957622621 -0.000775554632045626 -0.000229597543567706 ...
        0.000412282639707768 0.000996384621159785 0.00137612452249944 ...
        0.00144717287704672 0.00117292705161675 0.000594646042367572 ...
        -0.000176039366058333 -0.000980066870799755 -0.00164425265740917 ...
        -0.00201715754930876 -0.00199975172781467 -0.00156432861354308 ...
        -0.000758450541149401 0.000306302160936397 0.00147744004453913 ...
        0.00259117598653138 0.0035018689169032 0.00410558019656258 ...
        0.00435355080129453 0.00425419475223295 0.00386441498550808 ...
        0.00327341003889706 0.00258302774527131 0.00188912995469401 ...
        0.00126728764264386 0.000764949199507553 0.000400330332597545 ...
        0.000167221600715399 4.40582267261192e-05 -4.73023217780688e-05]);
end

y = step(Hd,x);


% [EOF]
