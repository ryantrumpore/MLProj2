function y = nsp1_filter(x)
%NSP1_FILTER Filters input x and returns output y.

% MATLAB Code
% Generated by MATLAB(R) 8.4 and the DSP System Toolbox 8.7.
% Generated on: 22-Apr-2015 12:44:02

%#codegen

% To generate C/C++ code from this function use the codegen command. Type
% 'help codegen' for more information.

persistent Hd;

if isempty(Hd)
    
    % The following code was used to design the filter coefficients:
    % % Equiripple Bandstop filter designed using the FIRPM function.
    %
    % % All frequency values are in Hz.
    % Fs = 4000;  % Sampling Frequency
    %
    % Fpass1 = 1425;            % First Passband Frequency
    % Fstop1 = 1475;            % First Stopband Frequency
    % Fstop2 = 1525;            % Second Stopband Frequency
    % Fpass2 = 1575;            % Second Passband Frequency
    % Dpass1 = 0.028774368332;  % First Passband Ripple
    % Dstop  = 0.001;           % Stopband Attenuation
    % Dpass2 = 0.057501127785;  % Second Passband Ripple
    % dens   = 20;              % Density Factor
    %
    % % Calculate the order from the parameters using FIRPMORD.
    % [N, Fo, Ao, W] = firpmord([Fpass1 Fstop1 Fstop2 Fpass2]/(Fs/2), [1 0 ...
    %                           1], [Dpass1 Dstop Dpass2]);
    %
    % % Calculate the coefficients using the FIRPM function.
    % b  = firpm(N, Fo, Ao, W, {dens});
    
    Hd = dsp.FIRFilter( ...
        'Numerator', [0.00615597136175605 0.00441364417366761 ...
        -0.00197612763432752 0.000372454480317585 2.95548785322006e-05 ...
        0.000826754526055373 -0.00255754720376665 0.00435687767562675 ...
        -0.0052686563878519 0.00465640613506857 -0.00260043503880368 ...
        -5.12262047694986e-05 0.00209836599830648 -0.00265224289146256 ...
        0.00164871183616116 0.000135340940444037 -0.00158941220717938 ...
        0.00196372277781623 -0.00128543039106287 0.000226956052440656 ...
        0.000458184224681513 -0.0004941886250774 0.000216336361718247 ...
        -0.00018879439079097 0.000628216719488236 -0.00113015429777598 ...
        0.00096802119251477 0.000229947660938113 -0.00196953399909627 ...
        0.00303354166036359 -0.00230154155811525 -0.000291712099697369 ...
        0.00341307617822764 -0.00499946398532142 0.00361728751054099 ...
        0.000377030957493268 -0.00477433863737173 0.00675523946228925 ...
        -0.00472799630368252 -0.000449481785759499 0.00578540949918964 ...
        -0.00794461260061392 0.00539711602959775 0.000476873251006346 ...
        -0.00615954540401992 0.00818870242846812 -0.0053772762001698 ...
        -0.000442343407066817 0.00562787793606302 -0.00714724153192564 ...
        0.00443575649123224 0.000336865019005284 -0.004000417010367 ...
        0.00455948868582736 -0.00242669208904541 -0.000176367809624192 ...
        0.00116852853178626 -0.000309526425026377 -0.000727435204255982 ...
        -3.18727483014881e-05 0.0028415914296716 -0.00553742082510715 ...
        0.00497740222951683 0.000239584452631747 -0.00787153666497066 ...
        0.0127523105757042 -0.0101352101945519 -0.000435778734161862 ...
        0.0136393499995619 -0.0209106334118223 0.015900675708787 ...
        0.000574632250424226 -0.019735841776756 0.0294483655630901 ...
        -0.0218748425652884 -0.000641637717358655 0.0257098513394385 ...
        -0.0377184123588178 0.0275964934433957 0.000624316661140093 ...
        -0.0310735443625847 0.0450457103011272 -0.0325960935533703 ...
        -0.00052212217706265 0.0353711857187737 -0.0508006818215219 ...
        0.0364417361934298 0.000343667261818749 -0.0382253062331992 ...
        0.0544715458855473 -0.0387785575684492 -0.000119520457097132 ...
        0.0393954995666798 0.944267526906352 0.0393954995666798 ...
        -0.000119520457097132 -0.0387785575684492 0.0544715458855473 ...
        -0.0382253062331992 0.000343667261818749 0.0364417361934298 ...
        -0.0508006818215219 0.0353711857187737 -0.00052212217706265 ...
        -0.0325960935533703 0.0450457103011272 -0.0310735443625847 ...
        0.000624316661140093 0.0275964934433957 -0.0377184123588178 ...
        0.0257098513394385 -0.000641637717358655 -0.0218748425652884 ...
        0.0294483655630901 -0.019735841776756 0.000574632250424226 ...
        0.015900675708787 -0.0209106334118223 0.0136393499995619 ...
        -0.000435778734161862 -0.0101352101945519 0.0127523105757042 ...
        -0.00787153666497066 0.000239584452631747 0.00497740222951683 ...
        -0.00553742082510715 0.0028415914296716 -3.18727483014881e-05 ...
        -0.000727435204255982 -0.000309526425026377 0.00116852853178626 ...
        -0.000176367809624192 -0.00242669208904541 0.00455948868582736 ...
        -0.004000417010367 0.000336865019005284 0.00443575649123224 ...
        -0.00714724153192564 0.00562787793606302 -0.000442343407066817 ...
        -0.0053772762001698 0.00818870242846812 -0.00615954540401992 ...
        0.000476873251006346 0.00539711602959775 -0.00794461260061392 ...
        0.00578540949918964 -0.000449481785759499 -0.00472799630368252 ...
        0.00675523946228925 -0.00477433863737173 0.000377030957493268 ...
        0.00361728751054099 -0.00499946398532142 0.00341307617822764 ...
        -0.000291712099697369 -0.00230154155811525 0.00303354166036359 ...
        -0.00196953399909627 0.000229947660938113 0.00096802119251477 ...
        -0.00113015429777598 0.000628216719488236 -0.00018879439079097 ...
        0.000216336361718247 -0.0004941886250774 0.000458184224681513 ...
        0.000226956052440656 -0.00128543039106287 0.00196372277781623 ...
        -0.00158941220717938 0.000135340940444037 0.00164871183616116 ...
        -0.00265224289146256 0.00209836599830648 -5.12262047694986e-05 ...
        -0.00260043503880368 0.00465640613506857 -0.0052686563878519 ...
        0.00435687767562675 -0.00255754720376665 0.000826754526055373 ...
        2.95548785322006e-05 0.000372454480317585 -0.00197612763432752 ...
        0.00441364417366761 0.00615597136175605]);
end

y = step(Hd,x);


% [EOF]
