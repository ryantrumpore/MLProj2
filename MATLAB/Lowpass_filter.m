function y = Lowpass_filter(x)
%LOWPASS_FILTER Filters input x and returns output y.

% MATLAB Code
% Generated by MATLAB(R) 8.4 and the DSP System Toolbox 8.7.
% Generated on: 21-Apr-2015 16:36:09

%#codegen

% To generate C/C++ code from this function use the codegen command. Type
% 'help codegen' for more information.

persistent Hd;

if isempty(Hd)
    
    % The following code was used to design the filter coefficients:
    % % Equiripple Lowpass filter designed using the FIRPM function.
    %
    % % All frequency values are in Hz.
    % Fs = 8000;  % Sampling Frequency
    %
    % Fpass = 900;             % Passband Frequency
    % Fstop = 1100;            % Stopband Frequency
    % Dpass = 0.057501127785;  % Passband Ripple
    % Dstop = 0.0001;          % Stopband Attenuation
    % dens  = 20;              % Density Factor
    %
    % % Calculate the order from the parameters using FIRPMORD.
    % [N, Fo, Ao, W] = firpmord([Fpass, Fstop]/(Fs/2), [1 0], [Dpass, Dstop]);
    %
    % % Calculate the coefficients using the FIRPM function.
    % b  = firpm(N, Fo, Ao, W, {dens});
    
    Hd = dsp.FIRFilter( ...
        'Numerator', [0.000307593544808128 0.000918634020972524 ...
        0.00192659428263064 0.00314304372888509 0.00413792219147525 ...
        0.00432692326444406 0.00320952828029254 0.000666781093711892 ...
        -0.00283126776797002 -0.00625927181420736 -0.00837169817465364 ...
        -0.00824483991376613 -0.00578736043676687 -0.001936909416921 ...
        0.00163262884402995 0.00323618252483596 0.00202736223344732 ...
        -0.00146349385287457 -0.00544553999188019 -0.00767866037140474 ...
        -0.00663847776705387 -0.00244531559030119 0.00299452924125521 ...
        0.00682482978781181 0.00672229412860524 0.00228171553344607 ...
        -0.00449356009987945 -0.00999865551296065 -0.0108572536168186 ...
        -0.00588023176773421 0.00294175740322062 0.0111134042149443 ...
        0.0138354572020377 0.00870570459005834 -0.00253523765477736 ...
        -0.0143419471491388 -0.0199117802744502 -0.014855160243328 ...
        -0.000117816244293625 0.0175830566784659 0.0284535920768764 ...
        0.0245060944750739 0.00439037385273934 -0.0243564802201357 ...
        -0.0471912690912757 -0.0482448533518582 -0.0175535530329184 ...
        0.0434015645369347 0.120598407349482 0.191725267813723 0.234292407414882 ...
        0.234292407414882 0.191725267813723 0.120598407349482 0.0434015645369347 ...
        -0.0175535530329184 -0.0482448533518582 -0.0471912690912757 ...
        -0.0243564802201357 0.00439037385273934 0.0245060944750739 ...
        0.0284535920768764 0.0175830566784659 -0.000117816244293625 ...
        -0.014855160243328 -0.0199117802744502 -0.0143419471491388 ...
        -0.00253523765477736 0.00870570459005834 0.0138354572020377 ...
        0.0111134042149443 0.00294175740322062 -0.00588023176773421 ...
        -0.0108572536168186 -0.00999865551296065 -0.00449356009987945 ...
        0.00228171553344607 0.00672229412860524 0.00682482978781181 ...
        0.00299452924125521 -0.00244531559030119 -0.00663847776705387 ...
        -0.00767866037140474 -0.00544553999188019 -0.00146349385287457 ...
        0.00202736223344732 0.00323618252483596 0.00163262884402995 ...
        -0.001936909416921 -0.00578736043676687 -0.00824483991376613 ...
        -0.00837169817465364 -0.00625927181420736 -0.00283126776797002 ...
        0.000666781093711892 0.00320952828029254 0.00432692326444406 ...
        0.00413792219147525 0.00314304372888509 0.00192659428263064 ...
        0.000918634020972524 0.000307593544808128]);
end

y = step(Hd,x);


% [EOF]
